# Звіт до лабораторної роботи (Варіант 13)
**Виконала:** Соболева Софія К-24

### Умова задачі
Розробити thread-safe структуру даних з двома полями (`m=2`). Структура має бути оптимізована під специфічний розподіл частоти операцій:
* **Поле 0:** Read: 10%, Write: 10%.
* **Поле 1:** Read: 50% (найчастіша операція), Write: 10%.
* **String:** 20% (операція отримання рядкового представлення всієї структури).

### Схема захисту даних
Для забезпечення потокобезпеки та максимальної продуктивності використано **два незалежні м’ютекси** (`std::mutex m1`, `std::mutex m2`):
* `m1` захищає поле `first`.
* `m2` захищає поле `second`.
 Оскільки згідно з варіантом 13 найчастішою операцією є читання поля 1 (50%), а поле 0 використовується рідше, використання одного глобального м'ютекса створило б зайву чергу (bottleneck). Два м'ютекси дозволяють одному потоку читати `second`, поки інший змінює `first`. Для операції `operator string` захоплюються **обидва** м'ютекси у фіксованому порядку (`m1` -> `m2`) для уникнення взаємного блокування (deadlock).

### Результати виконання 
Заміри проведено на 100,000 операцій у кожному файлі (Release mode x64).

| Режим роботи | Кількість потоків | Час виконання (ms) |
| :--- | :---: | :---: |
| Single-threaded | 1 | **8 ms** |
| Two-threaded | 2 | **25 ms** |
| Three-threaded | 3 | **32 ms** |

### Висновки
Результати показують зростання часу виконання зі збільшенням кількості потоків (8 -> 25 -> 32 мс). Це відповідає очікуванням для даного типу задачі, оскільки самі операції (присвоєння `int`) є атомарно швидкими, і час витрачається переважно на накладні витрати синхронізації (захоплення/звільнення `mutex`) та перемикання контексту (context switching). Конкуренція за ресурси (contention) при такій високій частоті легких операцій нівелює виграш від паралелізму, проте цілісність даних гарантовано збережена.

### Самостійно виконана робота
1.  Реалізовано клас `A` з двома м'ютексами (`mutex m1, m2`) та `lock_guard`.
2.  Написано `operator string` із захистом від deadlock.
3.  Реалізовано логіку попереднього парсингу команд у структуру `Command` для чистоти експерименту (виключено час I/O).
4.  Створено генератор тестів згідно з імовірнісним розподілом варіанта 13.

---
### Додатки

**Скріншот успішного збирання (Build):**
![Build Screenshot](build%20screenshot.png)

**Скріншот результатів виконання:**
![Execution Results](execution%20results.png)
